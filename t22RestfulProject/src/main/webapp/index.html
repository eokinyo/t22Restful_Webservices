<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
    <title>Hello App Engine</title>
  </head>

  <body onload='readLego();'>
    <h1>Hello App Engine!</h1>
    <script>
  function readLego(){
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
		  if (this.readyState == 4 && this.status == 200) {
		   var lego=JSON.parse(this.responseText);
		   document.getElementById("lego").innerHTML="Id="+lego.id+"<br>Name="+lego.name;
		   document.getElementById("legoid").value=lego.id;
		   
		  }
		};
		
		xhttp.open("GET","/rest/lego/getlego",true);
		xhttp.send();	  
  }
  function sendData(form){
		//Create a new Javascript object
		var legoSetting=new Object();
		legoSetting.speed=form.speed.value;
		var lego=new Object();
		lego.id=form.legoid.value;
		legoSetting.lego=lego;
		
		var json=JSON.stringify(legoSetting);
		var xhttp = new XMLHttpRequest();
		
		xhttp.onreadystatechange = function() {
		  if (this.readyState == 4 && this.status == 200) {
		   var settings=JSON.parse(this.responseText);
		   document.getElementById("settings").innerHTML="ID="+settings.id+" Speed="+settings.speed;
		  }
		};
		
		xhttp.open("POST","/rest/lego/setvalues",true);
		xhttp.setRequestHeader("Content-type","application/json");
		xhttp.send(json);
	 
		
	}
  </script>

    <table>
      <tr>
        <td colspan="2" style="font-weight:bold;">Available Servlets:</td>        
      </tr>
      <tr>
        <td><a href='/hello'>The servlet</a></td>
      </tr>
    </table>
  </body>
</html>