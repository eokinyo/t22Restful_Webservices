<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script>
function getRobot(){
	var xmlhttp=new XMLHttpRequest();
	// 2. Add a handler to the xmlhttp object. This anonymous function is executed every time
	// when the state of the request changes
	xmlhttp.onreadystatechange = function() {
	// 5. If the request is ready, meaning that all the response has come and the 
	// request succeeded (status 200), the if-block is executed
	  if (this.readyState == 4 && this.status == 200) {
	  	// 6. this.responseText is the content of the response and given to variable jsonRobot.
	  	// Remember that the method getRobot in the service return a JSON string 
		  var jsonrobot=this.responseText;
		// 7. Add JSON string as a content of element resultone - just for debugging
		  document.getElementById("resultone").innerHTML = jsonrobot;
		// 8. Parse JSON string to a Javascript object Robot
		  var Robot=JSON.parse(jsonrobot);
		// 9. print the Javascript object Robot by function printOneRobot.
		  printOneRobot(robot);
	  }
	};
	// 3. Initialize the request. The URI starts with a slash (/), which means that it points to 
	// root of the server. The whole URL could be http://localhost:8080/rest/Robotservice/getRobot/5 
	xmlhttp.open("GET", "/rest/t22RestfulProject/getonerobot/3", true);//See the service class in the previous chapter
	// 4. Make the request
	xmlhttp.send();
}

function printOneRobot(r){
	var s = "<ul>";
	s = s+ "<li>" + r.id;
	s = s+ "<li>" + r.name;
	s = s+ "<li>" + r.speed;
	s = s+ "</ul>";
	document.getElementById("result").innerHTML = s;
}
</script>
</head>
<body>
<button onclick = 'getRobot()';>Click!</button>
<p id ='resultone'>JSON comes here </p>

<div id='result' ></div>

</body>
</html>